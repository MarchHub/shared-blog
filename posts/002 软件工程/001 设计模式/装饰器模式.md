# è£…é¥°å™¨æ¨¡å¼

## æ€»è¿°

è£…é¥°å™¨æ¨¡å¼ï¼ŒDecorator Patternï¼Œç”¨äºåŠ¨æ€åœ°ä¸ºæŸä¸ªå¯¹è±¡æ·»åŠ å±æ€§ï¼Œåœ¨ä¸æ”¹å˜åŸå§‹å¯¹è±¡çš„ç»“æ„çš„å‰æä¸‹ã€‚

- è¢«ä¿®é¥°å¯¹è±¡
- è£…é¥°å™¨

å¸¸è§ä¾‹å­ â€”â€” æ™®é€šå’–å•¡ï¼Œå¯ä»¥é€‰æ‹©åŠ ç³–ã€æˆ–è€…åŠ å¥¶ï¼ˆè¿™é‡Œç³–å’Œå¥¶å°±å¯ä»¥æ˜¯è£…é¥°å™¨ï¼‰ã€‚æŸå¤©é‡åˆ°äº†ä¸€ä¸ªç¥å¥‡çš„ç”¨æˆ·è¦æ’’èƒ¡æ¤’ï¼Œå°±å¯ä»¥æŠŠèƒ¡æ¤’å°è£…æˆä¸€ä¸ªè£…é¥°å™¨ï¼Œè¿™æ ·å°±å¯ä»¥ä¸ç”¨æ”¹å˜æ™®é€šå’–å•¡è¿™ä¸ªå¯¹è±¡è€Œå®ç°åŠ¨æ€å¢æ·»å±æ€§ã€‚

## å®è·µ

ä¸‹é¢æä¾›ä¸€ä¸ª C# çš„å®ç°ä¸€ä¸ªå¯ä»¥å¾€æ™®é€šçš„å½¢çŠ¶ä¸Šæ·»åŠ ä¿®é¥°çš„æ•ˆæœ

é¦–å…ˆåˆ›å»ºä¸€ä¸ªæŠ½è±¡çš„æ¥å£ï¼Œåšä¸€ä¸ªå½¢çŠ¶çš„ â€œ å¥‘çº¦ â€
```C#
public interface IShape
{
	public void Draw();
}
```

æ¥ç€å®šä¹‰ä¸¤ä¸ªå…·ä½“çš„å½¢çŠ¶ï¼ŒçŸ©å½¢å’Œåœ†å½¢ï¼ˆè¿™è¾¹éšä¾¿å†™çš„
```C#
public class Rectangle : IShape
{
	private int _edges = 4;
	public string Name = "Rectangle";
	public void Draw()
	{
		Console.WriteLine(Name, _edges);
	}
}

public class Circle : IShape
{
	public void Draw()
	{
		Console.WriteLine("Circle, Perfect!");
	}
}
```

æ¥ç€å®šä¹‰è£…é¥°å™¨çš„æŠ½è±¡
```C#
public abstract class DecoratorBase(IShape shape) : IShape
{
	// éœ€è¦è£…é¥°çš„å½¢çŠ¶, ç”±æ„é€ å‡½æ•°æ³¨å…¥
	protected IShape _shape => shape;
	public virtual void Draw()
	{
		_shape.Draw();
	}
}
```

ç„¶åå®ç°ä¸¤ä¸ªå…·ä½“çš„è£…é¥°å™¨
```C#
public class StrokeDecorator(IShape shape) : DecoratorBase(shape)
{
	public float strokeWidth = 1.0f;
	public override void Draw()
	{
		base.Draw();
		Console.WriteLine("With Stroke {0}", strokeWidth);
	}
}

public class DropShadowDecorator(IShape shape) : DecoratorBase(shape)
{
	public float distance = 1.0f;
	[Range(0, 1)] public float transparent = 0.5f;
	public override void Draw()
	{
		base.Draw();
		Console.WriteLine($"With DropShadow: Distance {distance}, Transparent {transparent}");
	}
}
```

è°ƒç”¨ â€”â€”
```C#
public class DecoratorTest : ITest
{
Â  Â  public void RunTest()
Â  Â  {
Â  Â  Â  Â  // ä¸€ä¸ªæ™®é€šçš„çŸ©å½¢
Â  Â  Â  Â  Console.WriteLine("Rectangle");
Â  Â  Â  Â  IShape rectangle = new Rectangle();
Â  Â  Â  Â  rectangle.Draw();
  
Â  Â  Â  Â  Console.WriteLine("recWithStroke");
Â  Â  Â  Â  IShape recWithStroke = new StrokeDecorator(rectangle);
Â  Â  Â  Â  recWithStroke.Draw();

Â  Â  Â  Â  Console.WriteLine("recWithStrokeAndDropShadow:");
Â  Â  Â  Â  IShape recWithStrokeAndDropShadow = new DropShadowDecorator(recWithStroke);
Â  Â  Â  Â  recWithStrokeAndDropShadow.Draw();
Â  Â  }
}
```
é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªæ™®é€šçš„çŸ©å½¢ï¼Œç„¶åå…ˆåŠ ä¸Šä¸€ä¸ªæè¾¹çš„ç‰¹æ•ˆï¼Œæœ€åå†åŠ ä¸Šä¸€ä¸ªæŠ•å½±çš„ç‰¹æ•ˆï¼Œæœ€åå°±æœ‰äº†ä¸€ä¸ªæœ‰æè¾¹å’ŒæŠ•å½±çš„çŸ©å½¢ï¼Œéå¸¸çš„å¥½ä½¿ã€‚~~ä¸€ä¸ªéå¸¸å¸¸è§çš„AEèƒŒæ™¯ğŸ’¦~~
## ä¸€äº›æ€è€ƒ 

ä¸ºä»€ä¹ˆè£…é¥°å™¨ä¹Ÿè¦ç»§æ‰¿è¢«ä¿®é¥°å¯¹è±¡çš„æ¥å£ï¼Ÿâ€”â€”
- ä¸šåŠ¡å±‚åªéœ€è¦é¢å‘è¢«ä¿®é¥°å¯¹è±¡çš„æ¥å£è¿›è¡Œç¼–ç¨‹ï¼Œä¸éœ€è¦é¢å¤–çš„æˆæœ¬ï¼Œå³æ— éœ€æ”¹å˜è°ƒç”¨æ–¹å¼
- è£…é¥°é“¾å¯ä»»æ„å±‚çº§å åŠ 
- ç¬¦åˆ**é‡Œæ°æ›¿æ¢åŸåˆ™**

## å†™åœ¨æœ€å
| ä¼˜ç‚¹                  | ç¼ºç‚¹                    |
| ------------------- | --------------------- |
| ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œæ‰©å±•åŠŸèƒ½æ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç  | è£…é¥°é“¾è¿‡é•¿æ—¶ï¼Œä¼šå¢åŠ è°ƒè¯•å’Œç»´æŠ¤éš¾åº¦     |
| å¯ä»¥åŠ¨æ€ç»„åˆå¤šä¸ªèŒè´£ï¼Œé¿å…å­ç±»çˆ†ç‚¸   | æ¯å¢åŠ ä¸€ä¸ªè£…é¥°å™¨å°±éœ€è¦å†™ä¸€ä¸ªç±»ï¼Œç±»æ•°é‡å¢åŠ  |
| è£…é¥°å™¨å’Œè¢«è£…é¥°è€…å¯¹å®¢æˆ·ç«¯é€æ˜      | å¤šå±‚è£…é¥°å¯èƒ½é€ æˆæ€§èƒ½æŸè€—          |